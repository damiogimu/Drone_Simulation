CC=gcc
CFLAG=-Wall
GNL=TOOL/get_next_line.c TOOL/get_next_line_utils.c 

LAG_FILE=sim_lagrange.c
LAG_OBJ=sim_lagrange.o

NEWTON_FILE=sim_newton.c
NEWTON_OBJ=sim_newton.o

ERROR_FILE=error.c
ERROR_OBJ=error.o

PLOT_FILE=draw.c
PLOT_OBJ=draw.o

CALC_LAG=calc_lag
CALC_NEWTON=calc_newton
CALC_ERROR=calc_error

PLOT_LAG_POS=plot_lagpos
PLOT_NEWTON_POS=plot_ntpos
PLOT_LAG_ANGLE=plot_lagang
PLOT_NEWTON_ANGLE=plot_ntang
PLOT_ERROR_POS=plot_epos
PLOT_ERROR_ANGLE=plot_eang

RESULT_LAG=./RESULT/result_lag
RESULT_NEWTON=./RESULT/result_newton
RESULT_ERROR=./RESULT/result_error

$(CALC_NEWTON):$(NEWTON_OBJ)
	$(CC) $(CFLAG) -o $(CALC_NEWTON) $(NEWTON_FILE) -lm
	./$(CALC_NEWTON) > $(RESULT_NEWTON)
	rm $(CALC_NEWTON)	

$(CALC_LAG):$(LAG_OBJ)
	$(CC) $(CFLAG) -o $(CALC_LAG) $(LAG_FILE) -lm
	./$(CALC_LAG) > $(RESULT_LAG)
	rm $(CALC_LAG)

$(CALC_ERROR):$(ERROR_OBJ)
	$(CC) $(CFLAG) -o $(CALC_ERROR) $(ERROR_FILE) $(GNL)
	./$(CALC_ERROR) > $(RESULT_ERROR)
	rm $(CALC_ERROR)

$(PLOT_LAG_POS):$(PLOT_OBJ)
	$(CC) $(CFLAG) -D POS_F=1 -D LAG_F=1 -o $(PLOT_LAG_POS) $(PLOT_FILE)
	./$(PLOT_LAG_POS)
	rm $(PLOT_LAG_POS)

$(PLOT_NEWTON_POS):$(PLOT_OBJ)
	$(CC) $(CFLAG) -D POS_F=1 -o $(PLOT_NEWTON_POS) $(PLOT_FILE)
	./$(PLOT_NEWTON_POS)
	rm $(PLOT_NEWTON_POS)

$(PLOT_LAG_ANGLE):$(PLOT_OBJ)
	$(CC) $(CFLAG) -D LAG_F=1 -o $(PLOT_LAG_ANGLE) $(PLOT_FILE)
	./$(PLOT_LAG_ANGLE)
	rm $(PLOT_LAG_ANGLE)

$(PLOT_NEWTON_ANGLE):$(PLOT_OBJ)
	$(CC) $(CFLAG) -o $(PLOT_NEWTON_ANGLE) $(PLOT_FILE)
	./$(PLOT_NEWTON_ANGLE)
	rm $(PLOT_NEWTON_ANGLE)

$(PLOT_ERROR_POS):$(PLOT_OBJ)
	$(CC) $(CFLAG) -D ERROR_F=1 -D POS_F=1 -o $(PLOT_ERROR_POS) $(PLOT_FILE)
	./$(PLOT_ERROR_POS)
	rm $(PLOT_ERROR_POS)

$(PLOT_ERROR_ANGLE):$(PLOT_OBJ)
	$(CC) $(CFLAG) -o $(PLOT_ERROR_ANGLE) $(PLOT_FILE)
	./$(PLOT_ERROR_ANGLE)
	rm $(PLOT_ERROR_ANGLE)
